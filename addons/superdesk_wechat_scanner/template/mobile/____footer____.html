<script type="text/javascript">
    wx.config({
        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。c
        appId: "{$wx['appId']}", // 必填，公众号的唯一标识
        timestamp: {$wx['timestamp']}, // 必填，生成签名的时间戳
        nonceStr: "{$wx['nonceStr']}", // 必填，生成签名的随机串
        signature: "{$wx['signature']}",// 必填，签名，见附录1cc
        // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
        jsApiList: [
            'checkJsApi',
            'onMenuShareTimeline',
            'onMenuShareAppMessage',
            'onMenuShareQQ',
            'onMenuShareWeibo',
            'hideMenuItems',
            'showMenuItems',
            'hideAllNonBaseMenuItem',
            'showAllNonBaseMenuItem',
            'translateVoice',
            'startRecord',
            'stopRecord',
            'onRecordEnd',
            'playVoice',
            'pauseVoice',
            'stopVoice',
            'uploadVoice',
            'downloadVoice',
            'chooseImage',
            'previewImage',
            'uploadImage',
            'downloadImage',
            'getNetworkType',
            'openLocation',
            'getLocation',
            'hideOptionMenu',
            'showOptionMenu',
            'closeWindow',
            'scanQRCode',
            'chooseWXPay',
            'openProductSpecificView',
            'addCard',
            'chooseCard',
            'openCard'
        ]
    });
    wx.ready(function () {

        wx.checkJsApi({
            jsApiList: ['onMenuShareTimeline'], // 需要检测的JS接口列表，所有JS接口列表见附录2,
            success: function(res) {
                // 以键值对的形式返回，可用的api值true，不可用为false
                // 如：{"checkResult":{"chooseImage":true},"errMsg":"checkJsApi:ok"}
            }
        });


        var shareData = {
            title: '爸，我们聊一聊吧。',
            desc: '父亲节到了，借一方净土，把藏在心里的话，说出来吧。',
            link: "{$wx['url']}",
            imgUrl: '{MODULE_URL}template/mobile/img/share_logo.png',
        };

        //分享朋友
        wx.onMenuShareAppMessage({
            title: shareData.title,
            desc: shareData.desc,
            link: shareData.link,
            imgUrl:shareData.imgUrl,
            trigger: function (res) {
            },
            success: function (res) {
//                window.location.href ='php echo $_W['siteroot']."app/".$this->mturl('fansindex',array('id'=>$id))}';
//                TopBox.alert("分享后成功,等着收佣金吧!");
            },
            cancel: function (res) {
//                TopBox.alert("分享后获得积分,还有可能得到佣金哦!不要错过发大财的机会!");
            },
            fail: function (res) {
                alert(JSON.stringify(res));
            }
        });

        //分享朋友圈
        wx.onMenuShareTimeline({
            title: shareData.title+" - "+shareData.desc,
            link: shareData.link,
            imgUrl:shareData.imgUrl,
            trigger: function (res) {
            },
            success: function (res) {
//                window.location.href ='php echo $_W['siteroot']."app/".$this->mturl('fansindex',array('id'=>$id))}';
            },
            cancel: function (res) {
            },
            fail: function (res) {
                alert(JSON.stringify(res));
            }
        });
        //显示分享
        wx.showOptionMenu();
    });
    wx.error(function(res){
        // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
    });


</script>
<script>
//    document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
//        WeixinJSBridge.call('hideOptionMenu');
//    });
</script>
</body>
</html>