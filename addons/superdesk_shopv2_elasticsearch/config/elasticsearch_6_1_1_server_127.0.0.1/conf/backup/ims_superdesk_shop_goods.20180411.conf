input{
    stdin{
    }
    jdbc{
        #mysqljdbcconnectionstringtoourbackupdatabse
        jdbc_connection_string=>"jdbc:mysql://localhost:3306/db_super_desk"
        #theuserwewishtoexcuteourstatementas
        jdbc_user=>"root"
        jdbc_password=>"root@2016"
        #thepathtoourdownloadedjdbcdriver
        jdbc_driver_library=>"/home/install/logstash-6.1.1/mysql-connector-java-5.1.38.jar"
        #thenameofthedriverclassformysql
        jdbc_driver_class=>"com.mysql.jdbc.Driver"
        jdbc_paging_enabled=>"true"
        jdbc_page_size=>"50000"
        statement_filepath=>"/home/install/logstash-6.1.1/bin/config/sql/ims_superdesk_shop_goods.sql"
        schedule=>"0*/1****"
        #索引的类型
        type=>"ims_superdesk_shop_goods"
    }
}

filter{
    mutate{
        convert=>{
            "iscomment"=>"long"
            "isdiscount"=>"long"
            "ishot"=>"long"
            "isnew"=>"long"
            "isnodiscount"=>"long"
            "isrecommand"=>"long"
            "issendfree"=>"long"
            "istime"=>"long"
            "isverify"=>"long"
            "manydeduct"=>"long"
            "merchsale"=>"long"
            "minpriceupdated"=>"long"
            "sharebtn"=>"long"
            "showtotal"=>"long"
            "showtotaladd"=>"long"
            "status"=>"long"
            "verifytype"=>"long"
            "virtualsend"=>"long"
            "buyagain_condition"=>"long"
            "buyagain_sale"=>"long"
            "buyagain_islong"=>"long"
            "diyformtype"=>"long"
            "diymode"=>"long"
            "diypage"=>"long"
            "diysave"=>"long"
            "groupstype"=>"long"
            "buyshow"=>"long"
            "costprice"=>"float"
            "deduct"=>"float"
            "deduct2"=>"float"
            "diysave"=>"long"
            "dispatchtype"=>"long"
            "weight"=>"float"
        }
    }
}

output{
    elasticsearch{
        hosts=>["127.0.0.1:9200"]
        index=>"db_super_desk"
        document_type=>"ims_superdesk_shop_goods"
        document_id=>"%{id}"
        workers=>1
        template_overwrite=>true
    }
    stdout{
        codec=>json_lines
    }
}
